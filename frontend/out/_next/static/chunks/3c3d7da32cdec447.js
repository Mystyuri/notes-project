(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31609,e=>{"use strict";var t=e.i(28797),n=e.i(76633),i=e.i(58357),l=e.i(34270),r=e.i(41428);function o({className:e,...n}){return(0,t.jsx)(l.Loader2Icon,{role:"status","aria-label":"Loading",className:(0,r.cn)("size-4 animate-spin",e),...n})}let s=()=>(0,t.jsx)(o,{});var a=e.i(75680),d=e.i(85205),c=e.i(38537);let u=(0,c.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),h=(0,c.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var j=e.i(37296),x=e.i(7657),m=e.i(17722),p=e.i(14245),v=e.i(96134),C=e.i(85709);function f(e){let{content:n,title:l,id_note:r}=e,[o,s]=(0,C.useState)(!1),c=(0,i.useDeleteNoteMutation)(),j=()=>s(e=>!e);return o?(0,t.jsx)(k,{content:n,title:l??"",id_note:r,onCancel:j}):(0,t.jsxs)(a.Card,{className:"w-full relative",children:[(0,t.jsxs)(a.CardAction,{className:"absolute right-1 top-1",children:[(0,t.jsx)(d.Button,{size:"icon-sm",variant:"link",onClick:j,children:(0,t.jsx)(u,{})})," ",(0,t.jsx)(d.Button,{size:"icon-sm",variant:"link",onClick:()=>c.mutate({id_note:r}),children:(0,t.jsx)(h,{})})]}),(0,t.jsxs)(a.CardContent,{children:[(0,t.jsx)(a.CardTitle,{children:l}),(0,t.jsx)(a.CardDescription,{children:n})]})]})}let y=x.z.object({title:x.z.string(),content:x.z.string().min(2)}),k=e=>{let n=!!e.id_note,l=(0,j.useForm)({resolver:(0,m.zodResolver)(y),defaultValues:{title:"",content:"",...e}}),r=(0,i.useUpdateNoteMutation)(),o=(0,i.useCreateNoteMutation)(),s=l.handleSubmit(t=>{let n=t.title.length>1?t.title:null,i=t.content;e?.id_note?r.mutate({title:n,content:i,id_note:e.id_note}):o.mutate({title:n,content:i}),l.reset({title:"",content:""}),e.onCancel?.()}),c=e.id_note??"form-note";return(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("form",{id:c,onSubmit:s,children:(0,t.jsxs)(p.FieldSet,{children:[(0,t.jsx)(j.Controller,{control:l.control,name:"title",render:({field:e,fieldState:n})=>(0,t.jsxs)(p.Field,{"data-invalid":n.invalid,children:[(0,t.jsx)(v.Input,{autoComplete:"off",type:"text",placeholder:"Заголовок",...e}),n.invalid&&(0,t.jsx)(p.FieldError,{errors:[n.error]})]})}),(0,t.jsx)(j.Controller,{control:l.control,name:"content",render:({field:e,fieldState:n})=>(0,t.jsxs)(p.Field,{"data-invalid":n.invalid,children:[(0,t.jsx)(v.Input,{autoComplete:"off",type:"text",placeholder:"Заметка",...e}),n.invalid&&(0,t.jsx)(p.FieldError,{errors:[n.error]})]})})]})})}),(0,t.jsxs)(a.CardFooter,{className:"space-x-2",children:[(0,t.jsx)(d.Button,{type:"submit",form:c,children:n?"Редактировать":"Добавить"}),n&&(0,t.jsx)(d.Button,{variant:"secondary",type:"button",onClick:e.onCancel,children:"Отменить"})]})]})},b=()=>{let e=(0,i.useUserInfo)(),n=i.REMOVE_TOKEN;return(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:["Привет: ",e?.name]}),(0,t.jsx)(d.Button,{onClick:n,children:"Выйти"})]})},g=(0,n.withAuth)(()=>{let e=(0,i.useGetNotesQuery)();return e.isPending?(0,t.jsx)(s,{}):(0,t.jsxs)("div",{className:"grid w-lg gap-2 h-fit",children:[(0,t.jsx)(b,{}),(0,t.jsx)(k,{}),(e.data??[]).map(e=>(0,t.jsx)(f,{id_note:e.id_note,title:e.title,content:e.content},e.id_note))]})});e.s(["default",0,g],31609)}]);